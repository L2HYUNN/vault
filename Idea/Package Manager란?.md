Package ManagerëŠ” íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë£¨ëŠ” ì‘ì—…ì„ í¸ë¦¬í•˜ê³  ì•ˆì „í•˜ê²Œ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” íˆ´

íŒ¨í‚¤ì§€ë¥¼ ë‹¤ë£¨ëŠ” ì‘ì—…
1. ì„¤ì¹˜
2. ì—…ë°ì´íŠ¸
3. ìˆ˜ì •
4. ì‚­ì œ

### íŒ¨í‚¤ì§€

- íŒ¨í‚¤ì§€ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë¹„ìŠ·í•œ ê°œë…ìœ¼ë¡œ, ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì½”ë“œì˜ ë¬¶ìŒì´ë¼ë©´, íŒ¨í‚¤ì§€ëŠ”Â **ì½”ë“œì˜ ë°°í¬**ë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ì½”ë“œì˜ ë¬¶ìŒì´ë‹¤.j
- íŒ¨í‚¤ì§€ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ ì‹¤í–‰ íŒŒì¼(executable)ì„ í¬í•¨í•œë‹¤.
- íŒ¨í‚¤ì§€ëŠ” ë‹¤ìŒ 3ê°€ì§€ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì½”ë“œì˜ ë°°í¬ ë‹¨ìœ„ì´ë‹¤.
    1. ì»´íŒŒì¼í•œ ì†Œí”„íŠ¸ì›¨ì–´ì˜ ë°”ì´ë„ˆë¦¬(binary)
    2. í™˜ê²½ ì„¤ì •(configuration)ì— ê´€ë ¨ëœ ì •ë³´
    3. ì˜ì¡´(dependency)ì— ê´€ë ¨ëœ ì •ë³´

### Dependency

- ë§ì€ íŒ¨í‚¤ì§€ë“¤ì€ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ë§Œ ì œëŒ€ë¡œ ë™ì‘í•œë‹¤. ì´ ê²½ìš°ì— ê¸°ì¡´ íŒ¨í‚¤ì§€ë¥¼ ì œëŒ€ë¡œ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ í•„ìš”í•œ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ë¥¼Â **'dependency'** ë¼ê³  í•œë‹¤.
- íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ê³ ì í•  ë•Œ dependencyì— í•´ë‹¹í•˜ëŠ” íŒ¨í‚¤ì§€ë“¤ì„ ì „ë¶€ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.

#### Dependency Hell

- dependencyë“¤ì„ ì„¤ì¹˜í•˜ëŠ” ë„ì¤‘, ì„¤ì¹˜í•˜ê³  ìˆëŠ” dependencyì˜ dependencyë¥¼ ì„¤ì¹˜í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ì´ëŸ° ìƒí™©ì´ ëŠì„ì—†ì´ ì´ì–´ì§ˆ ê²½ìš° ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ê´€ë¦¬í•˜ê¸°ê°€ êµ‰ì¥íˆ ì–´ë ¤ì›Œì§„ë‹¤.
- ì´ëŸ° ê²½ìš°ë¥¼Â **Dependency Hell**ì´ë¼ê³  í•œë‹¤.

ğŸ‘‰ ê°ê°ì˜ íŒ¨í‚¤ì§€ê°€ ìì‹ ì˜ dependencyì— ëŒ€í•œ ì •ë³´ë¥¼ ê°€ì§€ê²Œ í•œë‹¤ë©´, ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” íŒ¨í‚¤ì§€ì˜ dependencyë¥¼ íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ë¥¼ í†µí•´ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤.

### íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ ìˆ˜í–‰í•˜ëŠ” ì¼

1. íŒ¨í‚¤ì§€ì˜ dependency ê´€ë¦¬
2. íŒ¨í‚¤ì§€ì˜ ë³´ì•ˆ ê´€ë¦¬ - ì‹ ë¢°í•  ìˆ˜ ìˆìŒ(authenticity), ì†ìƒë˜ì§€ ì•ŠìŒ(integrity) ë³´ì¥
3. ì—¬ëŸ¬ íŒ¨í‚¤ì§€ë¥¼ ê¸°ëŠ¥ì— ë”°ë¼ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ ì •ë¦¬
4. íŒ¨í‚¤ì§€ ì••ì¶• í•´ì œ
5. Software repositoryë¡œë¶€í„° íŒ¨í‚¤ì§€ë¥¼ ì°¾ê³ , ë‹¤ìš´ë¡œë“œí•˜ê³ , ì„¤ì¹˜í•˜ê³ , ì—…ë°ì´íŠ¸í•˜ëŠ” ì—­í• 

### íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ê°€ ë™ì‘í•˜ëŠ” ì„¸ ë‹¨ê³„
íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” ë³´í†µ `Resolution`, `Fetch`, `Link` ì„¸ ë‹¨ê³„ë¡œ ë™ì‘í•œë‹¤.

![[Pasted image 20240808134325.png]]

#### Resolution 

> [!summary] 
> - ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ê³ ì •
> - ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ë¥¸ ì˜ì¡´ì„± í™•ì¸
> - ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ë¥¸ ì˜ì¡´ì„± ë²„ì „ ê³ ì •

1. ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ê³ ì •
   `package.json`ì— ëª…ì‹œëœ ë²„ì „ ë²”ìœ„ì— ë”°ë¼ ì •í™•í•œ ë²„ì „ì„ ê²°ì •í•œë‹¤.
   
   ë²„ì „ ê´€ë¦¬ì— ëŒ€í•œ ë¬¸ì„œ ì°¸ì¡°: [ìœ ì˜ì  ë²„ì „ 2.0.0](https://semver.org/lang/ko/)
   íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €ëŠ” ë²”ìœ„ë¥¼ ë§Œì¡±í•˜ëŠ” ì„ ì—ì„œ ê°€ëŠ¥í•œ **ìµœì‹  ë²„ì „**ì„ ì‚¬ìš©í•˜ë ¤ê³  í•œë‹¤.

2. ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ë¥¸ ì˜ì¡´ì„± í™•ì¸
   JavaScriptì—ì„œëŠ” íŒ¨í‚¤ì§€ë¼ë¦¬ ì˜ì¡´ì„±ì„ ê°–ëŠ” ìƒí™©ì´ í”í•˜ë‹¤.
   ë”°ë¼ì„œ **ì˜ì¡´ì„±ì´ ë˜ ì–´ë–¤ ì˜ì¡´ì„±ì„ ê°€ì§€ëŠ”ì§€ í™•ì¸**í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë‹¤.

3. ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë‹¤ë¥¸ ì˜ì¡´ì„± ë²„ì „ ê³ ì •
   2ì—ì„œ í™•ì¸í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì˜ì¡´ì„± ë²„ì „ ë˜í•œ ê³ ì •í•´ì•¼ í•œë‹¤.

> ë”°ë¼ì„œ JavaScriptì—ì„œëŠ” ì˜ì¡´ì„±ì˜ ë²„ì „ì„ ë²”ìœ„ë¡œ ëª…ì‹œí•˜ê³ , íŒ¨í‚¤ì§€ ê°„ì—ë„ ì˜ì¡´ì„±ì„ ê°€ì§€ê¸° ë•Œë¬¸ì—, ë˜‘ê°™ì€ `package.json`ì— ëŒ€í•´ì„œë„ ì‚¬ìš©í•˜ëŠ” ì˜ì¡´ì„± ë²„ì „ì´ ì™„ì „íˆ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.
> 
> Resolution ë‹¨ê³„ëŠ” ëª¨ë“  ê¸°ê¸°ì—ì„œ ê³ ì •ëœ ë²„ì „ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.
> 
> ì˜ì¡´ì„± ë²„ì „ì„ ì „ë¶€ ê³ ì •ì‹œí‚¤ê³ , ì˜ì¡´ì„±ì˜ ì˜ì¡´ì„±ì„ ëª¨ë‘ ì°¾ì•„ ë²„ì „ì„ ê³ ì •ì‹œí‚¤ë©°, ê·¸ ê²°ê³¼ë¬¼ì„ `yarn.lock`ì´ë‚˜ `package-lock.json`ì— ì €ì¥í•œë‹¤.

#### Fetch

> [!summary] 
> - ê²°ì •ëœ ë²„ì „ì˜ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•˜ëŠ” ê³¼ì •

Resolutionì˜ ê²°ê³¼ë¡œ ê²°ì •ëœ ë²„ì „ì„ ì‹¤ì œë¡œ ë‹¤ìš´ë¡œë“œ í•œë‹¤.
`package-lock.json` / `yarn.lock`ì— ëª…ì‹œëœ ë²„ì „ì˜ íŒ¨í‚¤ì§€ë¥¼ ë‹¤ìš´ë¡œë“œ í•œë‹¤.

ì¼ë°˜ì ìœ¼ë¡œ 99%ëŠ” npm ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ ë‹¤ ë°›ì•„ì˜¨ë‹¤.

#### Link

> [!summary]
> - Resolution / Fetch ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì†ŒìŠ¤ ì½”ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•˜ëŠ” ê³¼ì •

npm, pnpm, PnP(Plug'n'Play)ì˜ ì‚¬ë¡€ë¥¼ ê°ê° ì‚´í´ë³´ì.

1. npm Linker
   `package.json`ì—ì„œ ëª…ì‹œí•˜ëŠ” ëª¨ë“  ì˜ì¡´ì„±ì„ **`node_modules` ë””ë ‰í† ë¦¬ ë°‘ì—ë‹¤ê°€ í•˜ë‚˜í•˜ë‚˜ì”© ì¶”ê°€í•œë‹¤.**

```shell
my-service/
â””â”€ node_modules/
|  â”œâ”€ react/
|  |  
|  â””â”€ @tossteam/tds-mobile/
|     â””â”€ node_modules/
|         â””â”€ @radix-ui/react-dialog
|
â””â”€ src
    â””â”€ index.ts
```

> [!warning] ë¬¸ì œì 
> ì´ëŸ¬í•œ ë°©ì‹ì€ íŒ¨í‚¤ì§€ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ node_modulesë¥¼ ê³„ì† íƒ€ê³  ì˜¬ë¼ê°€ íŒŒì¼ì„ ì—¬ëŸ¬ ë²ˆ ì½ì–´ì•¼ í•œë‹¤.
> ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
> 
> 1. import, require í•˜ëŠ” ì†ë„ê°€ ëŠë ¤ì§„ë‹¤.
> 2. ë””ë ‰í† ë¦¬ì˜ í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì§„ë‹¤
>    
> ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ [í˜¸ì´ìŠ¤íŒ…(Hoisting)](https://toss.tech/article/lightning-talks-package-manager)ì´ë¼ëŠ” íŠ¹ì´í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸°ë„ í•˜ì§€ë§Œ ìµœì í™”ê°€ ì™„ì „íˆ ë˜ëŠ” ê²ƒë„ ì•„ë‹ˆê³  ë¶ˆì•ˆì •í•˜ê¸° ë•Œë¬¸ì— ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹ˆë‹¤

2. pnpm Linker
   ![[Pasted image 20240808152502.png]]
   Pnpmì€ í¼í¬ë¨¼ìŠ¤ê°€ í–¥ìƒëœ(performant) npmì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.
   `node_modules`ë¥¼ í•˜ë‚˜ì”© ì“°ê¸° ë•Œë¬¸ì— ë°œìƒí•œ ì†ë„, ìš©ëŸ‰ ë¬¸ì œë¥¼ ê°œì„ í–ˆë‹¤.
   
   **How?**
   ê¸°ì¡´ì˜ `node_modules`ëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤.
   ëŒ€ì‹  **Hard link** ë°©ì‹ì„ í†µí•´ ë¹ ë¥´ê³  ìš©ëŸ‰ì„ ìµœì í™”ì‹œí‚¨ë‹¤.
   
 > [!info] Hard Link
> Hard linkëŠ” ì‰½ê²Œ ë§í•´ `alias`ë¥¼ ê±°ëŠ” ê²ƒì´ë‹¤.
> 
> npmì²˜ëŸ¼ ë‹¨ìˆœ ë³µë¶™í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ aliasê°€ ìƒê¸°ë©´ ê±°ê¸°ë¡œ ë°”ë¡œ ì ‘ê·¼í•œë‹¤.
> ë”°ë¼ì„œ ì˜ì¡´ì„±ì´ ë””ìŠ¤í¬ì— í•˜ë‚˜ë§Œ ì„¤ì¹˜ëœë‹¤.
> 
> í•˜ì§€ë§Œ `node_modules` ë””ë ‰í† ë¦¬ë¥¼ ê³„ì† ëŒë©´ì„œ aliasë¥¼ í•˜ë‚˜ì”© ê±¸ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë’¤ì—ì„œ ì†Œê°œí•  PnP ë°©ì‹ì— ë¹„í•´ ì¡°ê¸ˆì€ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ë‹¤.

3. PnP Linker
   `node_modules` ì—†ì´ ì˜ì¡´ì„±ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ ë°”ë¡œ PnPì´ë‹¤.
   
   PnPëŠ” íŒ¨í‚¤ì§€ë¥¼ importí•  ë•Œ ì¤‘ìš”í•œ ê²ƒì€ **ì–´ë–¤** íŒŒì¼ì—ì„œ `import` í•˜ëŠ”ê°€, **ë¬´ì—‡**ì„ `import` í•˜ëŠ”ê°€ ë¼ëŠ” ë‘ ê°€ì§€ ê´€ì ì—ì„œ ì ‘ê·¼í•œë‹¤.
   
   **ì¦‰ npmê³¼ pnpmì²˜ëŸ¼ node_modulesë¥¼ ìˆœíšŒí•˜ëŠ” ê²Œ ì•„ë‹Œ JavaScript ê°ì²´ë¡œ ì´ê²ƒì„ ì²˜ë¦¬í•œë‹¤.**

```js
["my-service", /* ... */ [{
  // ./my-serviceì—ì„œ...
  "packageLocation": "./my-service/",
  "packageDependencies": [
    // Reactë¥¼ import í•˜ë©´ 18.2.0 ë²„ì „ì„ ì œê³µí•˜ë¼.
    ["react", "npm:18.2.0"]
  ]
]
```

```js
/* react íŒ¨í‚¤ì§€ ì¤‘ì—ì„œ */
["react", [
  /* npm:18.2.0 ë²„ì „ì€ */
  ["npm:18.2.0", {
    /* ì´ ìœ„ì¹˜ì— ìˆê³  */
    "packageLocation": "./.yarn/cache/react-npm-18.2.0-98658812fc-a76d86ec97.zip/node_modules/react/",
    /* ì´ ì˜ì¡´ì„±ë“¤ì„ ì°¸ì¡°í•œë‹¤. */
Â Â Â Â "packageDependencies": [
      ["loose-envify", "npm:1.4.0"]
    ],
  }]
]],
```

ì´ì²˜ëŸ¼ PnPëŠ” ì˜ì¡´ì„±ì„ JavaScript Mapì„ ì´ìš©í•˜ì—¬ ì°¾ëŠ”ë‹¤. 

### Software repository (= repos)

- íŒ¨í‚¤ì§€ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ì €ì¥ì†Œ
- ì»¤ë®¤ë‹ˆí‹°ì— ê¸°ì—¬í•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì„ ìœ„í•´ íŒ¨í‚¤ì§€ë¥¼ ë“±ë¡í•  ìˆ˜ ìˆë‹¤.
- ì„±ëŠ¥ ë¬¸ì œ(load balancing)ì™€ ìœ„ê¸°ìƒí™© ëŒ€ì²˜(fault tolerant)ë¥¼ ìœ„í•´ ì—¬ëŸ¬ ê°œë¡œ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©°, ê°ê°ì˜ ì €ì¥ì†Œê°€ ë™ì¼í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.

### íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ì¢…ë¥˜

| Language | Package manager   | Software repository |
| -------- | ----------------- | ------------------- |
| Python   | pip               | PyPI                |
| PHP      | Composer          | Packagist           |
| Node.js  | NPM, Yarn         | NPM, Yarn           |
| Java     | Maven, Gradle     | Maven               |
| Ruby     | RubyGems, Bundler | RubyGems, Bundler   |


**Reference**
[íŒ¨í‚¤ì§€ ë§¤ë‹ˆì €(Package Manager)ë€?](https://aahc.tistory.com/14)
[npm, yarn, pnplkm ë¹„êµí•´ë³´ê¸°](https://yceffort.kr/2022/05/npm-vs-yarn-vs-pnpm)